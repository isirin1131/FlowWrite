#import "@preview/basic-document-props:0.1.0": simple-page
#show: simple-page.with("折彩", "", middle-text: "FlowWrite 产品设计文档", date: true, numbering: true, supress-mail-link: false)

#set text(font: ("Sarasa Fixed Slab SC"), lang:("zh"))
#show math.equation: set text(font: "Neo Euler")

FlowWrite 是一款专为 AI 辅助文字创作而生的可视化工作流编辑器。本文档聚焦于产品核心功能设计，探索文本处理与创意写作的全新交互范式。

#outline()


#line(length: 100%)
= 产品愿景

FlowWrite 致力于成为 AI 时代文字创作者的得力助手，通过直观的可视化工作流，让复杂的 AI 赋能文本处理变得简单而优雅。

== 缘起

在 AI 写作实践中，创作者往往需要在多个工具间频繁切换，prompt 的调试、文本的迭代、创意的碰撞都充满了重复性的复制粘贴操作。FlowWrite 诞生于这样的痛点：我们渴望一个场景覆盖足够大的创作范式，让文字工作者能够专注于内容本身。

== 理念

AI 可以大幅提高写作的效率，但真正的创作往往需要反复打磨和人工干预。我们借鉴 ComfyUI 的节点化思想，为文本创作领域打造一个灵活、可定制的可视化工作流系统。我们希望以这样的方式，让文字创作者享受 “人剑合一” 的创作体验。

== 核心功能

- *节点化文本处理*：将复杂的 AI 流程操作拆解为（低耦合的）基于节点的工作流
- *实时依赖解析*：智能处理节点间的数据流转与依赖关系
- *创作友好设计*：为文字工作者的使用习惯深度优化

#line(length: 100%)
= 工作流功能设计

基于对具体交互方式的设想，我们发现具体组件的设计可以是低耦合而优雅的。

== 抽象设计



== 组件设计

=== 文本块

承载最基本的文本。

=== 虚拟文本块

虚拟文本块是对其他节点输出结果的实时引用，具有以下特性：

- *引用性*：不存储实际文本内容，而是指向源节点的输出
- *实时同步*：源节点内容变化时，虚拟文本块自动更新
- *连接验证*：系统确保所有虚拟文本块都有有效的数据源连接
- *视觉区分*：通过特殊样式（如虚线边框、不同背景色）与普通文本块区分

交互设计：
- 单击选中，可复制引用关系
- 双击跳转到源节点
- 拖拽可快速建立与其他节点的连接
- 删除时只移除引用，不影响源节点内容

=== 文本块列表

可以插入文本块、虚拟文本块或嵌套的文本块列表。


#line(length: 50%, start: (20%, 0%), stroke: (dash: "dash-dotted"))

== 全局组件

=== 全局实时剪贴板

会记录用户所有的 Ctrl-C 行为涉及的对象，如文本块和文本块列表，还包括在编辑文本块时复制的文字。

用户可以手动添加在别的地方复制来的文字。

每个品类将只保存最近的 300 条记录。

=== 持久化的剪贴板内容

其实就是数据库。